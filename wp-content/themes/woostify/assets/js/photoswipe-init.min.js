"use strict";function initPhotoSwipe(e){var t=!1,r=function e(t,r){return t&&(r(t)?t:e(t.parentNode,r))},i=function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1;var t=(e.target||e.srcElement).closest(".product-images"),r=t.querySelectorAll(".image-item")[0];if(t.querySelector(".flickity-slider")&&(r=t.querySelector(".image-item.is-selected")),r){for(var i,n=r.parentNode,o=r.parentNode.childNodes,s=o.length,l=0,c=0;c<s;c++)if(1===o[c].nodeType){if(o[c]===r){i=l;break}l++}return i>=0&&a(i,n),!1}},n=function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1;var t=e.target||e.srcElement;if("A"!==t.tagName.toUpperCase()){var i=r(t,(function(e){return e.tagName&&"FIGURE"===e.tagName.toUpperCase()}));if(i){for(var n,o=i.parentNode,s=i.parentNode.childNodes,l=s.length,c=0,u=0;u<l;u++)if(1===s[u].nodeType){if(s[u]===i){n=c;break}c++}return n>=0&&a(n,o),!1}}},a=function(e,r,i,n){var a,o,s,l=document.querySelector(".pswp");if(s=function(e){for(var t,r,i,n,a=e.childNodes,o=a.length,s=[],l=0;l<o;l++)1===(t=a[l]).nodeType&&(r=t.children[0]).getAttribute("href")&&(i=r.getAttribute("data-size").split("x"),n={src:r.getAttribute("href"),w:parseInt(i[0],10),h:parseInt(i[1],10)},r.children.length>0&&(n.msrc=r.children[0].getAttribute("src")),n.el=t,s.push(n));return s}(r),o={galleryUID:r.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(e){var t=s[e].el.getElementsByTagName("img")[0],r=window.pageYOffset||document.documentElement.scrollTop,i=t.getBoundingClientRect();return{x:i.left,y:i.top+r,w:i.width}}},n)if(o.galleryPIDs){for(var c=0,u=s.length;c<u;c++)if(s[c].pid==e){o.index=c;break}}else o.index=parseInt(e,10)-1;else o.index=parseInt(e,10);if(!isNaN(o.index)){i&&(o.showAnimationDuration=0),(a=new PhotoSwipe(l,PhotoSwipeUI_Default,s,o)).init();a.listen("gettingData",(function(){if(!t){t=!0;var e=document.querySelectorAll(".pswp__thumbnails");e.length&&e.forEach((function(e){e.remove()})),setTimeout((function(){!function(e){var t=e.scrollWrap,r=document.querySelector(".product-gallery"),i=document.createElement("div");if(i.classList.add("pswp__thumbnails"),!r)return;var n=r.querySelector("#product-thumbnail-images");if(n){var a=n.querySelector(".flickity-slider");i.innerHTML=a?a.innerHTML:n.innerHTML}else Object.keys(e.items).forEach((function(t){var r=e.items[t],n=document.createElement("div"),a=document.createElement("img");a.setAttribute("src",r.msrc),n.classList.add("thumbnail-item"),n.appendChild(a),i.appendChild(n)}));Object.keys(e.items).forEach((function(t){var r=i.children[t];r.removeAttribute("style"),r.classList.remove("is-selected","is-nav-selected"),e.getCurrentIndex()==t&&r.classList.add("active"),r.addEventListener("click",(function(){e.goTo(e.items.indexOf(e.items[t]))}))})),t.parentNode.insertBefore(i,t.nextSibling)}(a)}),200)}})),a.listen("close",(function(){var e=a.scrollWrap.closest(".pswp").querySelector(".pswp__thumbnails");e&&(e.remove(),t=!1)})),a.listen("afterChange",(function(){var e=a.scrollWrap.closest(".pswp").querySelector(".pswp__thumbnails");e&&Object.keys(a.items).forEach((function(t){var r=e.children[t];r.classList.remove("active"),a.getCurrentIndex()==t&&r.classList.add("active")}))}))}};for(var o=document.querySelectorAll(e),s=0,l=o.length;s<l;s++){var c=o[s].closest(".product-images").querySelector(".photoswipe-toggle-button");o[s].setAttribute("data-pswp-uid",s+1),c.onclick=i,o[s].onclick=n}var u=function(){var e=window.location.hash.substring(1),t={};if(e.length<5)return t;for(var r=e.split("&"),i=0,n=r.length;i<n;i++)if(r[i]){var a=r[i].split("=");a.length<2||(t[a[0]]=a[1])}return t.gid&&(t.gid=parseInt(t.gid,10)),t}();u.pid&&u.gid&&a(u.pid,o[u.gid-1],!0,!0)}initPhotoSwipe("#product-images");